const iconv = require('iconv-lite');
const fs = require('fs');
const jschardet = require('jschardet');
const punycode = require('punycode/');

const bf = fs.readFileSync('./test/00100B90');
const bfArr = Array.from(bf);
console.log('bfArr', bfArr);

const bodyRead = iconv.decode(Buffer.from(bfArr, 'hex'), 'utf-16');
console.log('bodyRead', bodyRead);

// const c = jschardet.detect(bf);
// console.log('c', JSON.stringify(c));

const bf10 = [
    104, 60, 0, 16, 104, 60, 0, 16, 0, 0, 0, 0, 75, 142, 141, 0, 4, 112, 15, 0, 16, 109, 3, 4, 0, 0, 0, 30, 58, 0, 16,
    99, 0, 0, 16, 0, 0, 0, 0, 31, 58, 0, 16, 0, 0, 0, 0, 102, 0, 0, 16, 0, 0, 0, 0, 37, 58, 0, 16, 112, 32, 42, 42, 42,
    15, 85, 102, 85, 102, 224, 32, 32, 32, 32, 15, 98, 17, 103, 0, 78, 178, 114, 49, 118, 132, 103, 11, 83, 203, 78,
    236, 224, 32, 58, 41, 32, 32, 77, 101, 114, 114, 121, 32, 67, 104, 114, 105, 115, 116, 109, 97, 115, 126, 126, 126,
    126, 33, 33, 33, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 14, 32, 41, 52, 24, 0, 16, 21, 4, 1, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 2, 3, 8, 7, 64, 1, 0, 0, 0, 237, 33, 0, 0, 186, 49, 182, 11, 151, 146, 225, 0, 0, 145, 56, 43, 56, 54, 49, 51,
    56, 48, 48, 55, 51, 50, 53, 48, 48, 4, 145, 56, 43, 56, 54, 49, 53, 50, 48, 48, 51, 51, 49, 48, 48, 55, 0, 8, 192,
    140, 53, 23, 151, 146, 225, 0, 32, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
];

const bfHex = [
    0x68, 0x3c, 0x0, 0x10, 0x68, 0x3c, 0x0, 0x10, 0x0, 0x0, 0x0, 0x0, 0x4b, 0x8e, 0x8d, 0x0, 0x4, 0x70, 0xf, 0x0, 0x10,
    0x6d, 0x3, 0x4, 0x0, 0x0, 0x0, 0x1e, 0x3a, 0x0, 0x10, 0x63, 0x0, 0x0, 0x10, 0x0, 0x0, 0x0, 0x0, 0x1f, 0x3a, 0x0,
    0x10, 0x0, 0x0, 0x0, 0x0, 0x66, 0x0, 0x0, 0x10, 0x0, 0x0, 0x0, 0x0, 0x25, 0x3a, 0x0, 0x10, 0x70, 0x20, 0x2a, 0x2a,
    0x2a, 0xf, 0x55, 0x66, 0x55, 0x66, 0xe0, 0x20, 0x20, 0x20, 0x20, 0xf, 0x62, 0x11, 0x67, 0x0, 0x4e, 0xb2, 0x72, 0x31,
    0x76, 0x84, 0x67, 0xb, 0x53, 0xcb, 0x4e, 0xec, 0xe0, 0x20, 0x3a, 0x29, 0x20, 0x20, 0x4d, 0x65, 0x72, 0x72, 0x79,
    0x20, 0x43, 0x68, 0x72, 0x69, 0x73, 0x74, 0x6d, 0x61, 0x73, 0x7e, 0x7e, 0x7e, 0x7e, 0x21, 0x21, 0x21, 0x20, 0x20,
    0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0xe, 0x20, 0x29, 0x34, 0x18, 0x0, 0x10, 0x15, 0x4, 0x1, 0x0, 0x0,
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2, 0x3, 0x8, 0x7, 0x40, 0x1, 0x0, 0x0, 0x0, 0xed, 0x21, 0x0, 0x0, 0xba, 0x31,
    0xb6, 0xb, 0x97, 0x92, 0xe1, 0x0, 0x0, 0x91, 0x38, 0x2b, 0x38, 0x36, 0x31, 0x33, 0x38, 0x30, 0x30, 0x37, 0x33, 0x32,
    0x35, 0x30, 0x30, 0x4, 0x91, 0x38, 0x2b, 0x38, 0x36, 0x31, 0x35, 0x32, 0x30, 0x30, 0x33, 0x33, 0x31, 0x30, 0x30,
    0x37, 0x0, 0x8, 0xc0, 0x8c, 0x35, 0x17, 0x97, 0x92, 0xe1, 0x0, 0x20, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2, 0x0,
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
];

const ucsCode = punycode.ucs2.decode('中文');
const ucsStr = punycode.ucs2.encode([0x53cb]);

console.log('ucsCode', ucsCode);
console.log('ucsStr', ucsStr);

while (bfHex.length > 0) {
    const t = iconv.decode(Buffer.from(bfHex, 'hex'), 'ucs2');
    console.log(t);
    // console.log('', punycode.ucs2.encode(bfHex));
    bfHex.splice(0, 1);
}

setTimeout(() => {}, 1000000);
